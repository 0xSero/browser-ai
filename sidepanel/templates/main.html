            <main class="main-content">

                <!-- Chat Interface -->
                <div id="chatInterface" class="chat-area">
                    <!-- Agent Nav (when subagents active) -->
                    <div id="agentNav" class="agent-nav hidden">
                        <div
                            class="agent-nav-item main-agent active"
                            data-agent="main"
                        >
                            <span class="agent-status"></span>
                            <span>Main</span>
                        </div>
                    </div>

                    <!-- Empty state -->
                    <div id="chatEmptyState" class="chat-empty-state">
                        <div class="chat-empty-orb"></div>
                        <div class="chat-empty-title">Ready when you are</div>
                        <div class="chat-empty-subtitle">
                            Ask anything or add tabs/files for richer context.
                        </div>
                    </div>

                    <!-- Messages -->
                    <div id="chatMessages" class="chat-messages"></div>

                    <button
                        id="scrollToLatestBtn"
                        class="jump-to-latest hidden"
                    >
                        Jump to latest
                    </button>

                    <!-- Plan Drawer (above composer) -->
                    <div id="planDrawer" class="plan-drawer hidden">
                        <div class="plan-drawer-header" id="planDrawerToggle">
                            <div class="plan-drawer-title">
                                <svg class="plan-drawer-chevron" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                                <span>Plan</span>
                                <span class="plan-drawer-count" id="planStepCount">0 steps</span>
                            </div>
                            <div class="plan-drawer-actions">
                                <button class="plan-drawer-btn" id="planClearBtn" title="Clear plan">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="plan-drawer-content" id="planDrawerContent">
                            <ol class="plan-checklist" id="planChecklist"></ol>
                        </div>
                    </div>

                    <!-- Composer -->
                    <div class="composer-wrapper">
                        <div
                            id="selectedTabsBar"
                            class="selected-tabs hidden"
                        ></div>
                        <div id="composer" class="composer">
                            <textarea
                                id="userInput"
                                placeholder="Message..."
                                rows="1"
                            ></textarea>
                            <div class="composer-toolbar">
                                <div class="composer-toolbar-left">
                                    <button
                                        id="openSidebarBtn"
                                        class="icon-btn"
                                        title="Open menu"
                                    >
                                        <svg
                                            width="16"
                                            height="16"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <line x1="3" y1="12" x2="21" y2="12" />
                                            <line x1="3" y1="6" x2="21" y2="6" />
                                            <line x1="3" y1="18" x2="21" y2="18" />
                                        </svg>
                                    </button>
                                    <div id="statusBar" class="composer-status">
                                        <span id="statusDot" class="status-dot"></span>
                                        <span id="statusText">Ready</span>
                                        <span id="statusMeta" class="status-meta"></span>
                                    </div>
                                </div>
                                <div class="composer-toolbar-right">
                                    <button
                                        id="fileBtn"
                                        class="icon-btn"
                                        title="Attach file"
                                    >
                                        <svg
                                            width="16"
                                            height="16"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <path
                                                d="M21.44 11.05 12.36 20.12a5 5 0 0 1-7.07-7.07l8.49-8.49a3 3 0 0 1 4.24 4.24L9.76 17.12a1 1 0 0 1-1.41-1.41l7.07-7.07"
                                            />
                                        </svg>
                                    </button>
                                    <input
                                        id="fileInput"
                                        type="file"
                                        multiple
                                        accept=".md,.txt,.csv,.json,.log"
                                        class="hidden"
                                    />
                                    <button
                                        id="tabSelectorBtn"
                                        class="icon-btn tab-selector-btn"
                                        title="Select tabs"
                                    >
                                        <svg
                                            width="16"
                                            height="16"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <rect
                                                x="3"
                                                y="3"
                                                width="18"
                                                height="18"
                                                rx="2"
                                            />
                                            <line
                                                x1="3"
                                                y1="9"
                                                x2="21"
                                                y2="9"
                                            />
                                            <line
                                                x1="9"
                                                y1="21"
                                                x2="9"
                                                y2="9"
                                            />
                                        </svg>
                                    </button>
                                    <button
                                        id="settingsBtn"
                                        class="icon-btn"
                                        title="Settings"
                                    >
                                        <svg
                                            width="16"
                                            height="16"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <path
                                                d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                                            />
                                            <circle cx="12" cy="12" r="3" />
                                        </svg>
                                    </button>
                                    <div class="model-selector">
                                        <span class="model-selector-label">Model</span>
                                        <select id="modelSelect">
                                            <option value="">
                                                Select model
                                            </option>
                                        </select>
                                        <svg
                                            class="model-selector-chevron"
                                            width="12"
                                            height="12"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <polyline points="6 9 12 15 18 9" />
                                        </svg>
                                    </div>
                                    <button
                                        id="sendBtn"
                                        class="send-btn"
                                        title="Send"
                                    >
                                        <svg
                                            width="16"
                                            height="16"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2.5"
                                        >
                                            <line
                                                x1="22"
                                                y1="2"
                                                x2="11"
                                                y2="13"
                                            />
                                            <polygon
                                                points="22 2 15 22 11 13 2 9 22 2"
                                            />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>

